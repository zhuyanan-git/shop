<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org">
<meta charset="utf-8">
<link href="/layui/css/layui.css" rel="stylesheet">
<link href="/css/bootstrap.min14ed.css?v=3.3.6" rel="stylesheet">
<link href="/css/font-awesome.min93e3.css?v=4.4.0" rel="stylesheet">
<link href="/css/animate.min.css" rel="stylesheet">
<link href="/css/style.min862f.css?v=4.1.0" rel="stylesheet">
</head>
<body style="width:80%;margin-top:10px;margin-left:auto;margin-right: auto">
<form class="layui-form layui-form-pane" action="" method="post">
    <div class="layui-form-item">
        <label class="layui-form-label">关键字</label>
        <div class="layui-input-inline">
            <input type="text" name="keyword" id="keyword" autocomplete="off"  class="layui-input">
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">内容</label>
        <div class="layui-input-inline">
            <input type="text" name="content" id="content"  autocomplete="off" class="layui-input">
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">创建时间</label>
        <div class="layui-input-inline">
            <input type="text" name="createtime" id="createtime" th:value="${#dates.format(new java.util.Date().getTime(), 'yyyy-MM-dd HH:mm:ss')}" readonly="true" autocomplete="off" class="layui-input">
        </div>
    </div>
    <div class="layui-form-item">
        <div class="layui-input-block">
            <button class="layui-btn" lay-submit="" lay-filter="addSave" >提交</button>
            <button type="reset" class="layui-btn layui-btn-primary">重置</button>
        </div>
    </div>
</form>
<script src="/js/jquery.min.js?v=2.1.4"></script>
<script src="/js/plugins/metisMenu/jquery.metisMenu.js"></script>
<script src="/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>
<script src="/js/plugins/layer/layer.min.js"></script>
<script src="/js/hplus.min.js?v=4.1.0"></script>
<script type="text/javascript" src="/js/contabs.min.js"></script>
<script src="/js/plugins/pace/pace.min.js"></script>
<script src="/layui/layui.js"></script>
<script>
    //保存方法
    layui.use(['form','layer'], function () {
        var form = layui.form
            , layer = layui.layer;
        //监听提交
        form.on('submit(addSave)', function (data) {
            var keyword = $("#keyword").val();
            var content = $("#content").val();
            if (keyword==""){
                layer.alert("关键字不能为空")
                $("#keyword").focus();
                return false;
            }
            if(content == ""){
                layer.alert("内容不能为空")
                $("#content").focus();
                return false;
            }

            //console.log(JSON.stringify(data.field));//表单数据
            $.post('/reply/addSave',data.field,function (result) {
                if (result.success){
                    layer.closeAll('loading');
                    layer.load(2);
                    layer.msg("添加成功", {icon: 6});
                    setTimeout(function(){
                        window.parent.location.reload();//修改成功后刷新父界面
                    }, 1000);
                    //加载层-风格
                }else{
                    layer.msg("添加失败，请重试", {icon: 5});
                }
            });
            return false;
        });
    });

</script>
</body>
</html>